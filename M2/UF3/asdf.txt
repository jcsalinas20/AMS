/*alterar contraseña*/
ALTER USER "AMS101"  
    IDENTIFIED BY "ams101"


/*conectar a con usuario*/
GRANT "CONNECT" TO "AMS102";


/*eliminar usuarios*/
DROP USER "AMS103";


/*creacion de usuarios*/
/*contraseña*/
  /*sin vencimiento*/
CREATE USER "AMS101"  PROFILE "DEFAULT" 
    IDENTIFIED BY "12" DEFAULT TABLESPACE "USERS" 
    ACCOUNT UNLOCK;

  /*vencimiento*/
CREATE USER "AMS102"  PROFILE "DEFAULT" 
    IDENTIFIED BY "12" PASSWORD EXPIRE DEFAULT TABLESPACE "USERS"
    ACCOUNT UNLOCK;

/*externo*/
CREATE USER "AMS102"  PROFILE "DEFAULT" 
    IDENTIFIED EXTERNALLY DEFAULT TABLESPACE "USERS" 
    ACCOUNT UNLOCK;

/*global*/
  /*nombre*/
CREATE USER "AMS102"  PROFILE "DEFAULT" 
    IDENTIFIED GLOBALLY AS 'CN=Carlos, OU=Unidad, O=Organizacion,
    L=Martorell, ST=Cataluña, C=US' DEFAULT TABLESPACE "USERS" 
    ACCOUNT UNLOCK;

  /*cualquiera*/
CREATE USER "AMS102"  PROFILE "DEFAULT" 
    IDENTIFIED GLOBALLY AS 'carlos' DEFAULT TABLESPACE "USERS" 
    ACCOUNT UNLOCK;


/*bloquear o desbloquear usuario*/

CREATE USER "AMS102"  PROFILE "DEFAULT" 
    IDENTIFIED BY "12" PASSWORD EXPIRE DEFAULT TABLESPACE "USERS"
    ACCOUNT UNLOCK;

CREATE USER "AMS102"  PROFILE "DEFAULT" 
    IDENTIFIED BY "12" PASSWORD EXPIRE DEFAULT TABLESPACE "USERS"
    ACCOUNT LOCK;



/*creare tablespace*/
  /*Permanent*/
    /*offline*/
CREATE TABLESPACE "ALUMNO" 
    LOGGING 
    DATAFILE 'C:\ORACLE\ORADATA\ORCL\ALUMNO.ora' SIZE 5M EXTENT 
    MANAGEMENT LOCAL OFFLINE SEGMENT SPACE MANAGEMENT  AUTO 

    /*online*/
CREATE TABLESPACE "ALUMNO" 
    LOGGING 
    DATAFILE 'C:\ORACLE\ORADATA\ORCL\ALUMNO.ora' SIZE 5M EXTENT 
    MANAGEMENT LOCAL SEGMENT SPACE MANAGEMENT  AUTO 

  /*Temporal*/
CREATE TABLESPACE "ALUMNO" 
    LOGGING 
    DATAFILE 'C:\ORACLE\ORADATA\ORCL\ALUMNO.ora' SIZE 5M EXTENT 
    MANAGEMENT LOCAL OFFLINE SEGMENT SPACE MANAGEMENT  AUTO 

  /*Temporal por Defecto*/
CREATE 
    TEMPORARY TABLESPACE "ALUMNO" TEMPFILE 
    'C:\ORACLE\ORADATA\ORCL\ALUMNO.ora' SIZE 5M EXTENT MANAGEMENT
    LOCAL UNIFORM SIZE 1M;
ALTER DATABASE DEFAULT TEMPORARY TABLESPACE "ALUMNO"

  /*Deshacer*/
CREATE UNDO 
    TABLESPACE "ALUMNO" 
    DATAFILE 'C:\ORACLE\ORADATA\ORCL\ALUMNO.ora' SIZE 5M

ALTER USER "AMS101"  
    TEMPORARY TABLESPACE "ALUMNO"



/*crear perfiles*/
CREATE PROFILE "ALUMNO" 
    LIMIT CPU_PER_SESSION DEFAULT CPU_PER_CALL DEFAULT 
    CONNECT_TIME DEFAULT IDLE_TIME DEFAULT SESSIONS_PER_USER 
    DEFAULT LOGICAL_READS_PER_SESSION DEFAULT 
    LOGICAL_READS_PER_CALL DEFAULT PRIVATE_SGA DEFAULT 
    COMPOSITE_LIMIT DEFAULT FAILED_LOGIN_ATTEMPTS 3 
    PASSWORD_LOCK_TIME 5 PASSWORD_GRACE_TIME UNLIMITED 
    PASSWORD_LIFE_TIME 30 PASSWORD_REUSE_MAX UNLIMITED 
    PASSWORD_REUSE_TIME UNLIMITED PASSWORD_VERIFY_FUNCTION 
    DEFAULT

ALTER USER "AMS101"  PROFILE "ALUMNO"

CREATE PROFILE "PROFESORS" 
    LIMIT CPU_PER_SESSION DEFAULT CPU_PER_CALL DEFAULT 
    CONNECT_TIME DEFAULT IDLE_TIME DEFAULT SESSIONS_PER_USER 
    DEFAULT LOGICAL_READS_PER_SESSION DEFAULT 
    LOGICAL_READS_PER_CALL DEFAULT PRIVATE_SGA DEFAULT 
    COMPOSITE_LIMIT DEFAULT FAILED_LOGIN_ATTEMPTS UNLIMITED 
    PASSWORD_LOCK_TIME UNLIMITED PASSWORD_GRACE_TIME UNLIMITED 
    PASSWORD_LIFE_TIME UNLIMITED PASSWORD_REUSE_MAX DEFAULT 
    PASSWORD_REUSE_TIME DEFAULT PASSWORD_VERIFY_FUNCTION DEFAULT


/*crear roles con privilegios*/
CREATE ROLE "ALUMNOS_AMS1"  NOT IDENTIFIED;
GRANT "CONNECT" TO "ALUMNOS_AMS1";
GRANT "RESOURCE" TO "ALUMNOS_AMS1";

GRANT "ALUMNOS_AMS1" TO "AMS101";
ALTER USER "AMS101" DEFAULT ROLE  ALL

GRANT "DBA" TO "PROFE";
ALTER USER "PROFE" DEFAULT ROLE  ALL


/*privilegios de objetos*/
GRANT SELECT 
    ON  "SCOTT"."DEPT" TO "AMS101"
